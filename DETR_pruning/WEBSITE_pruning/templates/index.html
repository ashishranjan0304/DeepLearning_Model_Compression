<!doctype html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>Deep Learning Training Interface</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='styles.css') }}">
</head>
<body>
    <h1>Deep Learning Training Interface</h1>
    <form method="post" action="/" id="training-form">
        <label for="algorithm">Algorithm:</label>
        <select id="algorithm" name="algorithm" required>
            <option value="">Select Algorithm</option>
            <option value="FPGM">FPGM</option>
            <option value="Synflow">Synflow</option>
            <!-- Add options for other algorithms -->
        </select><br>
        
        <div id="model-fields" style="display: none;">
            <label for="model">Model:</label>
            <select id="model" name="model" required>
                <option value="">Select Model</option>
                <option value="DETR">DETR</option>
                <option value="ResNet">ResNet</option>
                <!-- Add options for other models -->
            </select><br>
            
            <!-- Input fields for main parameters -->
            <div id="main-params" style="display: none;">
                <div id="main-params-fpgm-detr" style="display: none;">
                    <label for="lr">Learning Rate:</label>
                    <input type="text" id="lr" name="lr"><br>
                    <label for="batch_size">Batch Size:</label>
                    <input type="number" id="batch_size" name="batch_size"><br>
                    <label for="resume">Resume Path:</label>
                    <input type="text" id="resume" name="resume"><br>
                    <label for="coco_path">COCO Path:</label>
                    <input type="text" id="coco_path" name="coco_path"><br>
                    <input type="checkbox" id="no_aux_loss" name="no_aux_loss">
                    <label for="no_aux_loss">No Aux Loss</label><br>
                    <input type="checkbox" id="eval" name="eval">
                    <label for="eval">Eval</label><br>
                    <label for="epochs">Epochs:</label>
                    <input type="number" id="epochs" name="epochs"><br>
                    <label for="num_workers">Number of Workers:</label>
                    <input type="number" id="num_workers" name="num_workers"><br>
                    <label for="output_dir">Output Directory:</label>
                    <input type="text" id="output_dir" name="output_dir"><br>
                    <label for="rate_norm">Rate Norm:</label>
                    <input type="text" id="rate_norm" name="rate_norm"><br>
                    <label for="rate_dist">Rate Dist:</label>
                    <input type="text" id="rate_dist" name="rate_dist"><br>
                    <label for="layer_begin">Layer Begin:</label>
                    <input type="number" id="layer_begin" name="layer_begin"><br>
                    <label for="layer_end">Layer End:</label>
                    <input type="number" id="layer_end" name="layer_end"><br>
                    <label for="layer_inter">Layer Inter:</label>
                    <input type="number" id="layer_inter" name="layer_inter"><br>
                </div>
                <div id="main-params-fpgm-resnet" style="display: none;">
                    <label for="dataset">Dataset:</label>
                    <input type="text" id="dataset" name="dataset"><br>
                    <label for="arch">Architecture:</label>
                    <input type="text" id="arch" name="arch"><br>
                    <label for="save_path">Save Path:</label>
                    <input type="text" id="save_path" name="save_path"><br>
                    <label for="epochs">Epochs:</label>
                    <input type="number" id="epochs" name="epochs"><br>
                    <label for="schedule">Schedule:</label>
                    <input type="text" id="schedule" name="schedule"><br>
                    <label for="gammas">Gammas:</label>
                    <input type="text" id="gammas" name="gammas"><br>
                    <label for="learning_rate">Learning Rate:</label>
                    <input type="text" id="learning_rate" name="learning_rate"><br>
                    <label for="decay">Decay:</label>
                    <input type="text" id="decay" name="decay"><br>
                    <label for="batch_size">Batch Size:</label>
                    <input type="number" id="batch_size" name="batch_size"><br>
                    <label for="rate_norm">Rate Norm:</label>
                    <input type="text" id="rate_norm" name="rate_norm"><br>
                    <label for="rate_dist">Rate Dist:</label>
                    <input type="text" id="rate_dist" name="rate_dist"><br>
                    <label for="layer_begin">Layer Begin:</label>
                    <input type="number" id="layer_begin" name="layer_begin"><br>
                    <label for="layer_end">Layer End:</label>
                    <input type="number" id="layer_end" name="layer_end"><br>
                    <label for="layer_inter">Layer Inter:</label>
                    <input type="number" id="layer_inter" name="layer_inter"><br>
                    <label for="epoch_prune">Epoch Prune:</label>
                    <input type="number" id="epoch_prune" name="epoch_prune"><br>
                </div>
                <!-- Add divs for other model-algorithm combinations -->
            </div>
        </div>
        
        <button type="submit">Run Command</button>
    </form>
    
    {% if output %}
    <div>
        <h2>Output:</h2>
        <pre>{{ output }}</pre>
    </div>
    {% endif %}

    <script>
        document.getElementById('algorithm').addEventListener('change', function() {
            var modelFields = document.getElementById('model-fields');
            modelFields.style.display = this.value ? 'block' : 'none';
            document.getElementById('main-params').style.display = 'none';
        });

        document.getElementById('model').addEventListener('change', function() {
            var mainParams = document.getElementById('main-params');
            var algorithm = document.getElementById('algorithm').value;
            var model = this.value;
            
            document.getElementById('main-params-fpgm-detr').style.display = 'none';
            document.getElementById('main-params-fpgm-resnet').style.display = 'none';
            // Hide other divs similarly

            if (algorithm === 'FPGM' && model === 'DETR') {
                document.getElementById('main-params-fpgm-detr').style.display = 'block';
            } else if (algorithm === 'FPGM' && model === 'ResNet') {
                document.getElementById('main-params-fpgm-resnet').style.display = 'block';
            }
            // Add other conditions for different algorithm-model combinations

            mainParams.style.display = model ? 'block' : 'none';
        });

        function toggleAdvanced() {
            var advancedSettings = document.getElementById('advanced-settings');
            advancedSettings.style.display = advancedSettings.style.display === 'none' ? 'block' : 'none';
        }
    </script>
</body>
</html>
